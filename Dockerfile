FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

RUN yum -y install python-boto3 python-boto && yum clean all

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGR5bmFtb2RiLWFwYgppbWFnZTogYW5zaWJsZXBsYXlib29rYnVu\
ZGxlL2R5bmFtb2RiLWFwYgpkZXNjcmlwdGlvbjogJ0R5bmFtb0RCIFRhYmxlJwp0YWdzOgogIC0g\
YW1hem9uCiAgLSBkeW5hbW9kYgpiaW5kYWJsZTogdHJ1ZQphc3luYzogb3B0aW9uYWwKbWV0YWRh\
dGE6CiAgZGlzcGxheU5hbWU6ICJBbWF6b24gRHluYW1vREIiCiAgbG9uZ0Rlc2NyaXB0aW9uOiAi\
QW1hem9uIER5bmFtb0RCIGlzIGEgZnVsbHkgbWFuYWdlZCBOb1NRTCBkYXRhYmFzZSBzZXJ2aWNl\
IHRoYXQgcHJvdmlkZXMgZmFzdCBhbmQgcHJlZGljdGFibGUgcGVyZm9ybWFuY2Ugd2l0aCBzZWFt\
bGVzcyBzY2FsYWJpbGl0eS4gWW91IGNhbiB1c2UgQW1hem9uIER5bmFtb0RCIHRvIGNyZWF0ZSBh\
IGRhdGFiYXNlIHRhYmxlIHRoYXQgY2FuIHN0b3JlIGFuZCByZXRyaWV2ZSBhbnkgYW1vdW50IG9m\
IGRhdGEsIGFuZCBzZXJ2ZSBhbnkgbGV2ZWwgb2YgcmVxdWVzdCB0cmFmZmljLiBBbWF6b24gRHlu\
YW1vREIgYXV0b21hdGljYWxseSBzcHJlYWRzIHRoZSBkYXRhIGFuZCB0cmFmZmljIGZvciB0aGUg\
dGFibGUgb3ZlciBhIHN1ZmZpY2llbnQgbnVtYmVyIG9mIHNlcnZlcnMgdG8gaGFuZGxlIHRoZSBy\
ZXF1ZXN0IGNhcGFjaXR5IHNwZWNpZmllZCBieSB0aGUgY3VzdG9tZXIgYW5kIHRoZSBhbW91bnQg\
b2YgZGF0YSBzdG9yZWQsIHdoaWxlIG1haW50YWluaW5nIGNvbnNpc3RlbnQgYW5kIGZhc3QgcGVy\
Zm9ybWFuY2UuIgogIGltYWdlVXJsOiAiaHR0cHM6Ly9zMy5hbWF6b25hd3MuY29tL3RocC1hd3Mt\
aWNvbnMtZGV2L0RhdGFiYXNlX0FtYXpvbkR5bmFtb0RCX0xBUkdFLnBuZyIKICBkb2N1bWVudGF0\
aW9uVXJsOiBodHRwczovL2F3cy5hbWF6b24uY29tL2RvY3VtZW50YXRpb24vZHluYW1vZGIvCnBs\
YW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246ICdEeW5hbW9EQiBUYWJsZScK\
ICAgIGZyZWU6IGZhbHNlCiAgICBwYXJhbWV0ZXJzOgogICAgICAjIyMjIyMjIyMjIyMjIyMKICAg\
ICAgIyBBV1MgQWNjb3VudCBJbmZvcm1hdGlvbgogICAgICAjIyMjIyMjIyMjIyMjIyMKICAgICAg\
LSBuYW1lOiBhd3NfYWNjZXNzX2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0\
bGU6IEFXUyBBY2Nlc3MgS2V5CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgQWNjZXNzIEtleSB0\
byBhdXRoZW50aWNhdGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IGRpc3BsYXlfZ3JvdXA6IEFXUyBBY2NvdW50IEluZm9ybWF0aW9uCiAgICAgIC0gbmFtZTogYXdz\
X3NlY3JldF9rZXkKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBBV1MgU2Vj\
cmV0IEtleQogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIFNlY3JldCBLZXkgdG8gYXV0aGVudGlj\
YXRlIHRvIEFXUyB3aXRoLicKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X2dy\
b3VwOiBBV1MgQWNjb3VudCBJbmZvcm1hdGlvbgogICAgICAtIG5hbWU6IGF3c19jbG91ZGZvcm1h\
dGlvbl9yb2xlX2FybgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IEFXUyBD\
bG91ZGZvcm1hdGlvbiByb2xlIEFSTgogICAgICAgIGRlc2NyaXB0aW9uOiAnSUFNIHJvbGUgQVJO\
IGZvciB1c2UgYXMgQ2xvdWRmb3JtYXRpb24gU3RhY2sgUm9sZS4nCiAgICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgICAgZGlzcGxheV9ncm91cDogQVdTIEFjY291bnQgSW5mb3JtYXRpb24KICAgICAg\
LSBuYW1lOiByZWdpb24KICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBBV1Mg\
UmVnaW9uCiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgUmVnaW9uIHRvIGNyZWF0ZSB0aGUgRHli\
YW1vREIgVGFibGUgaW4uJwogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOgogICAgICAg\
ICAgLSBhcC1ub3J0aGVhc3QtMQogICAgICAgICAgLSBhcC1ub3J0aGVhc3QtMgogICAgICAgICAg\
LSBhcC1zb3V0aC0xCiAgICAgICAgICAtIGFwLXNvdXRoZWFzdC0xCiAgICAgICAgICAtIGFwLXNv\
dXRoZWFzdC0yCiAgICAgICAgICAtIGNhLWNlbnRyYWwtMQogICAgICAgICAgLSBldS1jZW50cmFs\
LTEKICAgICAgICAgIC0gZXUtd2VzdC0xCiAgICAgICAgICAtIGV1LXdlc3QtMgogICAgICAgICAg\
LSBzYS1lYXN0LTEKICAgICAgICAgIC0gdXMtZWFzdC0xCiAgICAgICAgICAtIHVzLWVhc3QtMgog\
ICAgICAgICAgLSB1cy13ZXN0LTEKICAgICAgICAgIC0gdXMtd2VzdC0yCiAgICAgICAgZGVmYXVs\
dDogInVzLXdlc3QtMiIKICAgICAgIyMjIyMjIyMjIyMjIyMjCiAgICAgICMgRHluYW1vREIgU2V0\
dGluZ3MKICAgICAgIyMjIyMjIyMjIyMjIyMjCiAgICAgIC0gbmFtZTogSGFzaEF0dHJpYnV0ZU5h\
bWUKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBIYXNoIEF0dHJpYnV0ZSBO\
YW1lCiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgYXR0cmlidXRlIG5hbWUgdGhhdCBpcyB1c2Vk\
IGFzIHRoZSBwcmltYXJ5IGtleSBmb3IgdGhpcyB0YWJsZS4gUHJpbWFyeSBrZXkgZWxlbWVudCBu\
YW1lcyBjYW4gYmUgMSDigJMgMjU1IGNoYXJhY3RlcnMgbG9uZyBhbmQgaGF2ZSBubyBjaGFyYWN0\
ZXIgcmVzdHJpY3Rpb25zLicKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X2dy\
b3VwOiBEeW5hbW9EQiBTZXR0aW5ncwogICAgICAtIG5hbWU6IEhhc2hBdHRyaWJ1dGVUeXBlCiAg\
ICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogSGFzaCBBdHRyaWJ1dGUgVHlwZQog\
ICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGRhdGEgdHlwZSBmb3IgdGhlIGF0dHJpYnV0ZS4gWW91\
IGNhbiBzcGVjaWZ5IFMgZm9yIHN0cmluZyBkYXRhLCBOIGZvciBudW1lcmljIGRhdGEsIG9yIEIg\
Zm9yIGJpbmFyeSBkYXRhLicKICAgICAgICBlbnVtOiBbIlMiLCAiTiIsICJCIl0KICAgICAgICB0\
eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogIlMiCiAgICAgICAgZGlzcGxheV9ncm91cDogRHlu\
YW1vREIgU2V0dGluZ3MKICAgICAgLSBuYW1lOiBSYW5nZUF0dHJpYnV0ZU5hbWUKICAgICAgICBy\
ZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBSYW5nZSBBdHRyaWJ1dGUgTmFtZQogICAgICAg\
IGRlc2NyaXB0aW9uOiAnVGhlIGF0dHJpYnV0ZSBuYW1lIHRoYXQgaXMgdXNlZCBhcyB0aGUgc29y\
dCBrZXkgZm9yIHRoaXMgdGFibGUuIFNvcnQga2V5IGVsZW1lbnQgbmFtZXMgY2FuIGJlIDEg4oCT\
IDI1NSBjaGFyYWN0ZXJzIGxvbmcgYW5kIGhhdmUgbm8gY2hhcmFjdGVyIHJlc3RyaWN0aW9ucy4n\
CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGlzcGxheV9ncm91cDogRHluYW1vREIgU2V0\
dGluZ3MKICAgICAgLSBuYW1lOiBSYW5nZUF0dHJpYnV0ZVR5cGUKICAgICAgICByZXF1aXJlZDog\
dHJ1ZQogICAgICAgIHRpdGxlOiBSYW5nZSBBdHRyaWJ1dGUgVHlwZQogICAgICAgIGRlc2NyaXB0\
aW9uOiAnVGhlIGRhdGEgdHlwZSBmb3IgdGhlIGF0dHJpYnV0ZS4gWW91IGNhbiBzcGVjaWZ5IFMg\
Zm9yIHN0cmluZyBkYXRhLCBOIGZvciBudW1lcmljIGRhdGEsIG9yIEIgZm9yIGJpbmFyeSBkYXRh\
LicKICAgICAgICBlbnVtOiBbIlMiLCAiTiIsICJCIl0KICAgICAgICB0eXBlOiBlbnVtCiAgICAg\
ICAgZGVmYXVsdDogIlMiCiAgICAgICAgZGlzcGxheV9ncm91cDogRHluYW1vREIgU2V0dGluZ3MK\
ICAgICAgLSBuYW1lOiBSZWFkQ2FwYWNpdHlVbml0cwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICAgICAgdGl0bGU6IFJlYWQgQ2FwYWNpdHkgVW5pdHMKICAgICAgICBkZXNjcmlwdGlvbjogJ1Nl\
dHMgdGhlIGRlc2lyZWQgbWluaW11bSBudW1iZXIgb2YgY29uc2lzdGVudCByZWFkcyBvZiBpdGVt\
cyAodXAgdG8gMUtCIGluIHNpemUpIHBlciBzZWNvbmQgZm9yIHRoZSBzcGVjaWZpZWQgdGFibGUg\
YmVmb3JlIEFtYXpvbiBEeW5hbW9EQiBiYWxhbmNlcyB0aGUgbG9hZC4nCiAgICAgICAgdHlwZTog\
aW50CiAgICAgICAgZGVmYXVsdDogNQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IER5bmFtb0RCIFNl\
dHRpbmdzCiAgICAgIC0gbmFtZTogV3JpdGVDYXBhY2l0eVVuaXRzCiAgICAgICAgcmVxdWlyZWQ6\
IHRydWUKICAgICAgICB0aXRsZTogV3JpdGUgQ2FwYWNpdHkgVW5pdHMKICAgICAgICBkZXNjcmlw\
dGlvbjogJ1NldHMgdGhlIGRlc2lyZWQgbWluaW11bSBudW1iZXIgb2YgY29uc2lzdGVudCB3cml0\
ZXMgb2YgaXRlbXMgKHVwIHRvIDFLQiBpbiBzaXplKSBwZXIgc2Vjb25kIGZvciB0aGUgc3BlY2lm\
aWVkIHRhYmxlIGJlZm9yZSBBbWF6b24gRHluYW1vREIgYmFsYW5jZXMgdGhlIGxvYWQuJwogICAg\
ICAgIHR5cGU6IGludAogICAgICAgIGRlZmF1bHQ6IDUKICAgICAgICBkaXNwbGF5X2dyb3VwOiBE\
eW5hbW9EQiBTZXR0aW5ncwogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiAiQW1hem9u\
IGR5bmFtb2RiIgogICAgICBsb25nRGVzY3JpcHRpb246ICJBbWF6b24gRHluYW1vREIgaXMgYSBm\
dWxseSBtYW5hZ2VkIE5vU1FMIGRhdGFiYXNlIHNlcnZpY2UgdGhhdCBwcm92aWRlcyBmYXN0IGFu\
ZCBwcmVkaWN0YWJsZSBwZXJmb3JtYW5jZSB3aXRoIHNlYW1sZXNzIHNjYWxhYmlsaXR5LiBZb3Ug\
Y2FuIHVzZSBBbWF6b24gRHluYW1vREIgdG8gY3JlYXRlIGEgZGF0YWJhc2UgdGFibGUgdGhhdCBj\
YW4gc3RvcmUgYW5kIHJldHJpZXZlIGFueSBhbW91bnQgb2YgZGF0YSwgYW5kIHNlcnZlIGFueSBs\
ZXZlbCBvZiByZXF1ZXN0IHRyYWZmaWMuIEFtYXpvbiBEeW5hbW9EQiBhdXRvbWF0aWNhbGx5IHNw\
cmVhZHMgdGhlIGRhdGEgYW5kIHRyYWZmaWMgZm9yIHRoZSB0YWJsZSBvdmVyIGEgc3VmZmljaWVu\
dCBudW1iZXIgb2Ygc2VydmVycyB0byBoYW5kbGUgdGhlIHJlcXVlc3QgY2FwYWNpdHkgc3BlY2lm\
aWVkIGJ5IHRoZSBjdXN0b21lciBhbmQgdGhlIGFtb3VudCBvZiBkYXRhIHN0b3JlZCwgd2hpbGUg\
bWFpbnRhaW5pbmcgY29uc2lzdGVudCBhbmQgZmFzdCBwZXJmb3JtYW5jZS4iCiAgICAgIGNvc3Q6\
ICQwLjAwCg=="


USER apb
