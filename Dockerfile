FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

RUN yum -y install python-boto3 python-boto && yum clean all

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGR5bmFtb2RiLWFwYgpkZXNjcmlwdGlvbjogJ0R5bmFtb0RCIFRh\
YmxlJwp0YWdzOgogIC0gYW1hem9uCiAgLSBkeW5hbW9kYgpiaW5kYWJsZTogdHJ1ZQphc3luYzog\
b3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6ICJBbWF6b24gRHluYW1vREIiCiAgaW1h\
Z2VVcmw6ICJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vdGhwLWF3cy1pY29ucy1kZXYvRGF0YWJh\
c2VfQW1hem9uRHluYW1vREJfTEFSR0UucG5nIgogIGxvbmdEZXNjcmlwdGlvbjogIkFtYXpvbiBE\
eW5hbW9EQiBpcyBhIGZ1bGx5IG1hbmFnZWQgTm9TUUwgZGF0YWJhc2Ugc2VydmljZSB0aGF0IHBy\
b3ZpZGVzIGZhc3QgYW5kIHByZWRpY3RhYmxlIHBlcmZvcm1hbmNlIHdpdGggc2VhbWxlc3Mgc2Nh\
bGFiaWxpdHkuIFlvdSBjYW4gdXNlIEFtYXpvbiBEeW5hbW9EQiB0byBjcmVhdGUgYSBkYXRhYmFz\
ZSB0YWJsZSB0aGF0IGNhbiBzdG9yZSBhbmQgcmV0cmlldmUgYW55IGFtb3VudCBvZiBkYXRhLCBh\
bmQgc2VydmUgYW55IGxldmVsIG9mIHJlcXVlc3QgdHJhZmZpYy4gQW1hem9uIER5bmFtb0RCIGF1\
dG9tYXRpY2FsbHkgc3ByZWFkcyB0aGUgZGF0YSBhbmQgdHJhZmZpYyBmb3IgdGhlIHRhYmxlIG92\
ZXIgYSBzdWZmaWNpZW50IG51bWJlciBvZiBzZXJ2ZXJzIHRvIGhhbmRsZSB0aGUgcmVxdWVzdCBj\
YXBhY2l0eSBzcGVjaWZpZWQgYnkgdGhlIGN1c3RvbWVyIGFuZCB0aGUgYW1vdW50IG9mIGRhdGEg\
c3RvcmVkLCB3aGlsZSBtYWludGFpbmluZyBjb25zaXN0ZW50IGFuZCBmYXN0IHBlcmZvcm1hbmNl\
LiIKICBkb2N1bWVudGF0aW9uVXJsOiBodHRwczovL2F3cy5hbWF6b24uY29tL2RvY3VtZW50YXRp\
b24vZHluYW1vZGIvCnBsYW5zOgogIC0gbmFtZTogaGFzaHJhbmdlCiAgICBkZXNjcmlwdGlvbjog\
J0R5bmFtb0RCIFRhYmxlJwogICAgZnJlZTogZmFsc2UKICAgIG1ldGFkYXRhOgogICAgICBkaXNw\
bGF5TmFtZTogIkhhc2ggYW5kIFJhbmdlIHRhYmxlIgogICAgICBsb25nRGVzY3JpcHRpb246ICJB\
bWF6b24gRHluYW1vREIgaXMgYSBmdWxseSBtYW5hZ2VkIE5vU1FMIGRhdGFiYXNlIHNlcnZpY2Ug\
dGhhdCBwcm92aWRlcyBmYXN0IGFuZCBwcmVkaWN0YWJsZSBwZXJmb3JtYW5jZSB3aXRoIHNlYW1s\
ZXNzIHNjYWxhYmlsaXR5LiBZb3UgY2FuIHVzZSBBbWF6b24gRHluYW1vREIgdG8gY3JlYXRlIGEg\
ZGF0YWJhc2UgdGFibGUgdGhhdCBjYW4gc3RvcmUgYW5kIHJldHJpZXZlIGFueSBhbW91bnQgb2Yg\
ZGF0YSwgYW5kIHNlcnZlIGFueSBsZXZlbCBvZiByZXF1ZXN0IHRyYWZmaWMuIEFtYXpvbiBEeW5h\
bW9EQiBhdXRvbWF0aWNhbGx5IHNwcmVhZHMgdGhlIGRhdGEgYW5kIHRyYWZmaWMgZm9yIHRoZSB0\
YWJsZSBvdmVyIGEgc3VmZmljaWVudCBudW1iZXIgb2Ygc2VydmVycyB0byBoYW5kbGUgdGhlIHJl\
cXVlc3QgY2FwYWNpdHkgc3BlY2lmaWVkIGJ5IHRoZSBjdXN0b21lciBhbmQgdGhlIGFtb3VudCBv\
ZiBkYXRhIHN0b3JlZCwgd2hpbGUgbWFpbnRhaW5pbmcgY29uc2lzdGVudCBhbmQgZmFzdCBwZXJm\
b3JtYW5jZS4iCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOgogICAgICAjIyMjIyMj\
IyMjIyMjIyMKICAgICAgIyBBV1MgQWNjb3VudCBJbmZvcm1hdGlvbgogICAgICAjIyMjIyMjIyMj\
IyMjIyMKICAgICAgLSBuYW1lOiBhd3NfYWNjZXNzX2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVl\
CiAgICAgICAgdGl0bGU6IEFXUyBBY2Nlc3MgS2V5CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1Mg\
QWNjZXNzIEtleSB0byBhdXRoZW50aWNhdGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEFXUyBBY2NvdW50IEluZm9ybWF0aW9uCiAgICAg\
IC0gbmFtZTogYXdzX3NlY3JldF9rZXkKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRp\
dGxlOiBBV1MgU2VjcmV0IEtleQogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIFNlY3JldCBLZXkg\
dG8gYXV0aGVudGljYXRlIHRvIEFXUyB3aXRoLicKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAg\
ICBkaXNwbGF5X2dyb3VwOiBBV1MgQWNjb3VudCBJbmZvcm1hdGlvbgogICAgICAtIG5hbWU6IGF3\
c19jbG91ZGZvcm1hdGlvbl9yb2xlX2FybgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAg\
dGl0bGU6IEFXUyBDbG91ZGZvcm1hdGlvbiByb2xlIEFSTgogICAgICAgIGRlc2NyaXB0aW9uOiAn\
SUFNIHJvbGUgQVJOIGZvciB1c2UgYXMgQ2xvdWRmb3JtYXRpb24gU3RhY2sgUm9sZS4nCiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGlzcGxheV9ncm91cDogQVdTIEFjY291bnQgSW5mb3Jt\
YXRpb24KICAgICAgLSBuYW1lOiByZWdpb24KICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAg\
IHRpdGxlOiBBV1MgUmVnaW9uCiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgUmVnaW9uIHRvIGNy\
ZWF0ZSB0aGUgRHliYW1vREIgVGFibGUgaW4uJwogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBl\
bnVtOgogICAgICAgICAgLSBhcC1ub3J0aGVhc3QtMQogICAgICAgICAgLSBhcC1ub3J0aGVhc3Qt\
MgogICAgICAgICAgLSBhcC1zb3V0aC0xCiAgICAgICAgICAtIGFwLXNvdXRoZWFzdC0xCiAgICAg\
ICAgICAtIGFwLXNvdXRoZWFzdC0yCiAgICAgICAgICAtIGNhLWNlbnRyYWwtMQogICAgICAgICAg\
LSBldS1jZW50cmFsLTEKICAgICAgICAgIC0gZXUtd2VzdC0xCiAgICAgICAgICAtIGV1LXdlc3Qt\
MgogICAgICAgICAgLSBzYS1lYXN0LTEKICAgICAgICAgIC0gdXMtZWFzdC0xCiAgICAgICAgICAt\
IHVzLWVhc3QtMgogICAgICAgICAgLSB1cy13ZXN0LTEKICAgICAgICAgIC0gdXMtd2VzdC0yCiAg\
ICAgICAgZGVmYXVsdDogInVzLXdlc3QtMiIKICAgICAgIyMjIyMjIyMjIyMjIyMjCiAgICAgICMg\
RHluYW1vREIgU2V0dGluZ3MKICAgICAgIyMjIyMjIyMjIyMjIyMjCiAgICAgIC0gbmFtZTogSGFz\
aEF0dHJpYnV0ZU5hbWUKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBIYXNo\
IEF0dHJpYnV0ZSBOYW1lCiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgYXR0cmlidXRlIG5hbWUg\
dGhhdCBpcyB1c2VkIGFzIHRoZSBwcmltYXJ5IGtleSBmb3IgdGhpcyB0YWJsZS4gUHJpbWFyeSBr\
ZXkgZWxlbWVudCBuYW1lcyBjYW4gYmUgMSDigJMgMjU1IGNoYXJhY3RlcnMgbG9uZyBhbmQgaGF2\
ZSBubyBjaGFyYWN0ZXIgcmVzdHJpY3Rpb25zLicKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAg\
ICBkaXNwbGF5X2dyb3VwOiBEeW5hbW9EQiBTZXR0aW5ncwogICAgICAtIG5hbWU6IEhhc2hBdHRy\
aWJ1dGVUeXBlCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogSGFzaCBBdHRy\
aWJ1dGUgVHlwZQogICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGRhdGEgdHlwZSBmb3IgdGhlIGF0\
dHJpYnV0ZS4gWW91IGNhbiBzcGVjaWZ5IFMgZm9yIHN0cmluZyBkYXRhLCBOIGZvciBudW1lcmlj\
IGRhdGEsIG9yIEIgZm9yIGJpbmFyeSBkYXRhLicKICAgICAgICBlbnVtOiBbIlMiLCAiTiIsICJC\
Il0KICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogIlMiCiAgICAgICAgZGlzcGxh\
eV9ncm91cDogRHluYW1vREIgU2V0dGluZ3MKICAgICAgLSBuYW1lOiBSYW5nZUF0dHJpYnV0ZU5h\
bWUKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBSYW5nZSBBdHRyaWJ1dGUg\
TmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGF0dHJpYnV0ZSBuYW1lIHRoYXQgaXMgdXNl\
ZCBhcyB0aGUgc29ydCBrZXkgZm9yIHRoaXMgdGFibGUuIFNvcnQga2V5IGVsZW1lbnQgbmFtZXMg\
Y2FuIGJlIDEg4oCTIDI1NSBjaGFyYWN0ZXJzIGxvbmcgYW5kIGhhdmUgbm8gY2hhcmFjdGVyIHJl\
c3RyaWN0aW9ucy4nCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGlzcGxheV9ncm91cDog\
RHluYW1vREIgU2V0dGluZ3MKICAgICAgLSBuYW1lOiBSYW5nZUF0dHJpYnV0ZVR5cGUKICAgICAg\
ICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBSYW5nZSBBdHRyaWJ1dGUgVHlwZQogICAg\
ICAgIGRlc2NyaXB0aW9uOiAnVGhlIGRhdGEgdHlwZSBmb3IgdGhlIGF0dHJpYnV0ZS4gWW91IGNh\
biBzcGVjaWZ5IFMgZm9yIHN0cmluZyBkYXRhLCBOIGZvciBudW1lcmljIGRhdGEsIG9yIEIgZm9y\
IGJpbmFyeSBkYXRhLicKICAgICAgICBlbnVtOiBbIlMiLCAiTiIsICJCIl0KICAgICAgICB0eXBl\
OiBlbnVtCiAgICAgICAgZGVmYXVsdDogIlMiCiAgICAgICAgZGlzcGxheV9ncm91cDogRHluYW1v\
REIgU2V0dGluZ3MKICAgICAgLSBuYW1lOiBSZWFkQ2FwYWNpdHlVbml0cwogICAgICAgIHJlcXVp\
cmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IFJlYWQgQ2FwYWNpdHkgVW5pdHMKICAgICAgICBkZXNj\
cmlwdGlvbjogJ1NldHMgdGhlIGRlc2lyZWQgbWluaW11bSBudW1iZXIgb2YgY29uc2lzdGVudCBy\
ZWFkcyBvZiBpdGVtcyAodXAgdG8gMUtCIGluIHNpemUpIHBlciBzZWNvbmQgZm9yIHRoZSBzcGVj\
aWZpZWQgdGFibGUgYmVmb3JlIEFtYXpvbiBEeW5hbW9EQiBiYWxhbmNlcyB0aGUgbG9hZC4nCiAg\
ICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVsdDogNQogICAgICAgIGRpc3BsYXlfZ3JvdXA6\
IER5bmFtb0RCIFNldHRpbmdzCiAgICAgIC0gbmFtZTogV3JpdGVDYXBhY2l0eVVuaXRzCiAgICAg\
ICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogV3JpdGUgQ2FwYWNpdHkgVW5pdHMKICAg\
ICAgICBkZXNjcmlwdGlvbjogJ1NldHMgdGhlIGRlc2lyZWQgbWluaW11bSBudW1iZXIgb2YgY29u\
c2lzdGVudCB3cml0ZXMgb2YgaXRlbXMgKHVwIHRvIDFLQiBpbiBzaXplKSBwZXIgc2Vjb25kIGZv\
ciB0aGUgc3BlY2lmaWVkIHRhYmxlIGJlZm9yZSBBbWF6b24gRHluYW1vREIgYmFsYW5jZXMgdGhl\
IGxvYWQuJwogICAgICAgIHR5cGU6IGludAogICAgICAgIGRlZmF1bHQ6IDUKICAgICAgICBkaXNw\
bGF5X2dyb3VwOiBEeW5hbW9EQiBTZXR0aW5ncwo="


USER apb
